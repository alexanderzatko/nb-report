<!DOCTYPE html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Collect snow information from skiers">
  <link rel="manifest" href="manifest.json">
  <link rel="stylesheet" href="styles.css">
  <script src="/vendor/exif.js"></script>
  <script type="importmap">
    {
    "imports": {
    "i18next": "/node_modules/i18next/dist/esm/i18next.js",
    "i18next-http-backend": "/node_modules/i18next-http-backend/esm/index.js",
    "i18next-browser-languagedetector": "/node_modules/i18next-browser-languagedetector/dist/esm/i18nextBrowserLanguageDetector.js"
    }
    }
    </script>
  <title data-i18n="app.title">Report Snow Conditions</title>
</head>
<body>
    <main>
      <div id="auth-container">
        <div id="login-container">
          <button id="login-button" class="auth-button login">
            <img src="/icon/login-icon.svg" alt="Login" class="login-icon">
          </button>
          <p id="login-text"></p>
        </div>
        <button id="logout-button" class="auth-button logout" data-i18n="auth.logout">Logout</button>
      </div>

      <div id="dashboard-container" style="display: none;">
          <div class="dashboard-grid">
              <a href="#" class="dashboard-card" id="snow-report-link">
                  <div class="card-icon">
                    <i class="glyphicon glyphicon-list-alt"></i>
                      <!-- <img src="/icon/report-icon.svg" alt="New Report"> -->
                  </div>
                  <h3 data-i18n="dashboard.newReport">New Report</h3>
                  <p data-i18n="dashboard.newReportDesc">Submit a new snow condition report</p>
              </a>
              
              <div class="dashboard-card disabled">
                  <div class="card-icon">
                    <i class="glyphicon glyphicon-map-marker"></i>
                      <!-- <img src="/icon/reports-icon.svg" alt="My Reports"> -->
                  </div>
                  <h3 data-i18n="dashboard.recordGps">Record GPS</h3>
                  <p data-i18n="dashboard.recordGpsDesc">Start GPS recording (Coming soon)</p>
              </div>
              
              <div class="dashboard-card disabled">
                  <div class="card-icon">
                      <!-- <img src="/icon/profile-icon.svg" alt="Preferences"> -->
                  </div>
                  <h3 data-i18n="dashboard.preferences">Preferences</h3>
                  <p data-i18n="dashboard.preferencesDesc">Manage your preferences (Coming soon)</p>
              </div>
          </div>
      </div>

      <form id="snow-report-form" novalidate style="display:none;">

      <div class="form-group">
        <label for="report-title" class="required-field" data-i18n="form.reportTitle"></label>
        <input type="text" id="report-title" required data-i18n-validate="form.validation.required"/>
        <div class="validation-message"></div>
      </div>
        
        <label for="country" data-i18n="form.country">Country:</label>
        <select id="country" name="country">
          <!-- Options will be populated dynamically -->
        </select>

        <label for="region" data-i18n="form.region">Region:</label>
        <select id="region" name="region">
          <!-- Options will be populated dynamically -->
        </select>
      
        <div class="form-group">
          <label for="report-date" data-i18n="form.reportDate">Report Date:</label>
          <input 
            type="date" 
            id="report-date"
            name="report-date"
            required
            class="form-control"
            >
          </div>
        
        <label for="classic-style" data-i18n="form.classicStyle">Classic Style:</label>
        <select id="classic-style" data-i18n="form.trackConditions">
          <!-- Options populated dynamically -->
        </select>

        <label for="free-style" data-i18n="form.freeStyle">Free Style:</label>
        <select id="free-style" data-i18n="form.trackConditions">
          <!-- Options populated dynamically -->
        </select>

        <label for="snow-type" data-i18n="form.snowType">Snow Type:</label>
        <select id="snow-type" data-i18n="form.snowTypes">
          <!-- Options populated dynamically -->
        </select>

        <label for="snow-age" data-i18n="form.snowAge">Age:</label>
        <select id="snow-age" data-i18n="form.snowAgeOptions">
          <!-- Options populated dynamically -->
        </select>

        <label for="wetness" data-i18n="form.wetness">Moisture:</label>
        <select id="wetness" data-i18n="form.wetnessOptions">
          <!-- Options populated dynamically -->
        </select>

        <label for="snow-depth250" data-i18n="form.snowDepth250">Snow in 250 m (cm):</label>
        <input class="snow-depth" type="number" id="snow-depth250">

        <label for="snow-depth500" data-i18n="form.snowDepth500">Snow in 500 m (cm):</label>
        <input class="snow-depth" type="number" id="snow-depth500">

        <label for="snow-depth750" data-i18n="form.snowDepth750">Snow in 750 m (cm):</label>
        <input class="snow-depth" type="number" id="snow-depth750">

        <label for="snow-depth1000" data-i18n="form.snowDepth1000">Snow above 1000 m (cm):</label>
        <input class="snow-depth" type="number" id="snow-depth1000">

        <div class="form-group">
          <label for="report-note" class="required-field" data-i18n="form.reportNote">Report</label>
          <textarea id="report-note" required name="report_note" data-i18n-validate="form.validation.required"></textarea>
          <div class="validation-message"></div>
        </div>
        <!-- place gpx file upload here -->
        
        <!-- Photos upload -->
        <div id="photo-preview-container"></div>
        <button type="button" id="select-photos" class="photo-button" data-i18n="form.selectPhotos">Select Photos</button>
        <button type="button" id="take-photo" class="photo-button" data-i18n="form.takePhoto">Take Photo</button>
        <input type="file" id="photo-file-input" accept="image/*" multiple style="display: none;">
        <input type="file" id="camera-input" accept="image/*" capture="environment" style="display: none;">

        <!-- the rewards section -->
        
        <div id="rewards-section" class="rewards-section" style="display: none;">
          <h3 data-i18n="form.rewards.sectionTitle">Rewards</h3>
          <div class="time-elapsed">
            <span data-i18n="form.rewards.timeElapsed">Time since opening this form:</span>
            <span id="elapsed-time" class="time-display">
              <span id="elapsed-hours" class="time-unit hours">00</span>
              <span class="time-label hours">hrs.</span>
              <span id="elapsed-minutes" class="time-unit minutes">00</span>
              <span class="time-label minutes">min.</span>
              <span id="elapsed-seconds" class="time-unit seconds">00</span>
              <span class="time-label seconds">sec.</span>
            </span>
          </div>

          <div class="form-group">
            <label for="labor-time" data-i18n="form.rewards.laborTime">Labor time</label>
            <div class="input-with-units">
              <input type="number" id="labor-time" name="labor-time" min="0">
              <span data-i18n="form.rewards.laborTimeUnits">minutes</span>
            </div>
            <p class="help-text" data-i18n="form.rewards.laborTimeHelp"></p>
          </div>

          <div class="form-group">
            <label for="reward-requested" data-i18n="form.rewards.rewardRequested">Reward requested</label>
            <div class="input-with-units">
              <input type="number" id="reward-requested" name="reward-requested" value="0" min="0">
              <span data-i18n="form.rewards.rewardRequestedUnits">Merits</span>
            </div>
            <p class="help-text" data-i18n="form.rewards.rewardRequestedHelp"></p>
          </div>
        </div>
        
        <button type="submit" data-i18n="form.submit">Submit Report</button>
      </form>
    </main>

    <script type="module" src="/i18n.js"></script>
    <script type="module" src="/app.js"></script>
</body>
</html>
